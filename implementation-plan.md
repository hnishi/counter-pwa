# 音声フィードバック機能の実装プラン

## 1. 音声フィードバックの基本実装

### 1.1 音声パターンの定義

- カウントアップ時の音（短い上昇音）
- カウントダウン時の音（短い下降音）
- リセット時の音（3 連続の音）

### 1.2 音声再生機能の実装

- Web Audio API を使用して音を生成
- 各アクションに対応する音を再生する関数の作成

## 2. 設定の拡張

### 2.1 ストレージキーの追加

```typescript
const STORAGE_KEYS = {
  COUNT: "count",
  VIBRATION_ENABLED: "vibrationEnabled",
  SOUND_ENABLED: "soundEnabled",
};
```

### 2.2 状態管理の拡張

- 音声フィードバックの有効/無効を管理する state
- ローカルストレージとの同期
- 設定の永続化

## 3. UI 実装

### 3.1 設定パネルの作成

- 左下または右下に設定アイコンを配置
- クリックで設定パネルを表示
- 以下の設定オプションを含む：
  - 触覚フィードバック ON/OFF
  - 音声フィードバック ON/OFF

### 3.2 アクセシビリティ対応

- 設定パネルのキーボード操作対応
- スクリーンリーダー対応
- 適切な ARIA ラベルの設定

## 4. コードの構造化

### 4.1 コンポーネントの分割

- SettingsPanel コンポーネントの作成
- フィードバック関連のロジックを独立したカスタムフックに分離

### 4.2 型定義の追加

- 設定関連の型定義
- フィードバック関連の型定義

## 5. テスト項目

- 音声フィードバックの動作確認
- 設定の保存と読み込み
- 設定 UI の表示/非表示
- キーボード操作
- スクリーンリーダーでの読み上げ

## 6. 実装の流れ

1. 音声フィードバックの基本機能実装
2. 設定の保存機能実装
3. 設定 UI の実装
4. アクセシビリティ対応
5. テストと調整

## 実装モードへの引き継ぎ

counter-dev モードで実装を行う際の注意点：

- TypeScript の型安全性の維持
- Tailwind CSS を使用した UI 実装
- アクセシビリティへの配慮
- PWA のベストプラクティスの遵守
